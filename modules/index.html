<!DOCTYPE html>

<html class="writer-html5" data-content_root="../" lang="en">
<head>
<meta charset="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>API Reference — xibs 0.5.0 documentation</title>
<link href="../_static/pygments.css?v=fa44fd50" rel="stylesheet" type="text/css"/>
<link href="../_static/css/theme.css?v=19f00094" rel="stylesheet" type="text/css"/>
<link href="../_static/copybutton.css?v=76b2166b" rel="stylesheet" type="text/css"/>
<link href="../_static/sphinx-codeautolink.css?v=125d5c1c" rel="stylesheet" type="text/css"/>
<link href="../_static/sg_gallery.css?v=61a4c737" rel="stylesheet" type="text/css"/>
<link href="../_static/sg_gallery-binder.css?v=f4aeca0c" rel="stylesheet" type="text/css"/>
<link href="../_static/sg_gallery-dataframe.css?v=2082cf3c" rel="stylesheet" type="text/css"/>
<link href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" rel="stylesheet" type="text/css"/>
<link href="../_static/sphinx-dropdown.css?v=995e94df" rel="stylesheet" type="text/css"/>
<link href="../_static/panels-bootstrap.min.css?v=21c0b90a" rel="stylesheet" type="text/css"/>
<link href="../_static/css/custom.css?v=0a86e678" rel="stylesheet" type="text/css"/>
<!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
<script src="../_static/jquery.js?v=5d32c60e"></script>
<script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
<script src="../_static/documentation_options.js?v=1dd76d02"></script>
<script src="../_static/doctools.js?v=888ff710"></script>
<script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
<script src="../_static/clipboard.min.js?v=a7894cd8"></script>
<script src="../_static/copybutton.js?v=f281be69"></script>
<script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="../_static/js/theme.js"></script>
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="../faq.html" rel="next" title="Frequently Asked Questions"/>
<link href="../gallery/demo_simple_kicks.html" rel="prev" title="Simple Kicks Formalism - IBS Kicks Based on Analytical Growth Rates"/>
</head>
<body class="wy-body-for-nav">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a href="../index.html">
</a>
<div class="version">
                0.5.0
              </div>
<div role="search">
<form action="../search.html" class="wy-form" id="rtd-search-form" method="get">
<input aria-label="Search docs" name="q" placeholder="Search docs" type="text"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
</div><div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#basic-usage">Basic Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#integration-with-xsuite">Integration with xsuite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#formalism-and-models">Formalism and Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#analytical-calculations">Analytical Calculations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#providing-kicks-to-particle-distributions">Providing Kicks to Particle Distributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#formalism-dispatch">Formalism Dispatch</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_analytical_bjorken_mtingwa_emittances.html">Bjorken-Mtingwa Formalism - Analytical Growth Rates and Emittance Evolution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_analytical_bjorken_mtingwa_emittances.html#setting-up-line-and-particles">Setting up line and particles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_analytical_bjorken_mtingwa_emittances.html#computing-ibs-growth-rates">Computing IBS Growth Rates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_analytical_bjorken_mtingwa_emittances.html#computing-new-emittances-from-growth-rates">Computing New Emittances from Growth Rates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_analytical_bjorken_mtingwa_emittances.html#analytical-evolution-for-a-time-period">Analytical Evolution for a Time Period</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_compare_analyticals.html">Comparison of Analytical IBS Growth Rates and Emittances Evolution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_compare_analyticals.html#comparing-analytical-evolution-for-a-time-period">Comparing Analytical Evolution for a Time Period</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_analytical_nagaitsev_emittances.html">Nagaitsev Formalism - Analytical Growth Rates and Emittance Evolution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_analytical_nagaitsev_emittances.html#setting-up-line-and-particles">Setting up line and particles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_analytical_nagaitsev_emittances.html#computing-elliptic-integrals-and-ibs-growth-rates">Computing Elliptic Integrals and IBS Growth Rates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_analytical_nagaitsev_emittances.html#computing-new-emittances-from-growth-rates">Computing New Emittances from Growth Rates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_analytical_nagaitsev_emittances.html#analytical-evolution-for-many-turns">Analytical Evolution for Many Turns</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_simple_kicks.html">Simple Kicks Formalism - IBS Kicks Based on Analytical Growth Rates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_simple_kicks.html#setting-up-line-and-particles">Setting up line and particles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_simple_kicks.html#generating-the-ibs-kick-class">Generating the IBS Kick Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_simple_kicks.html#computing-and-applying-ibs-kicks">Computing and Applying IBS Kicks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_simple_kicks.html#applying-ibs-kicks-in-tracking">Applying IBS Kicks in Tracking</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#input-data-structures">Input Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="#formalism-dispatch">Formalism Dispatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ibs-analytical-calculations">IBS: Analytical Calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ibs-applying-kicks">IBS: Applying Kicks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#formulary">Formulary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#instantiating-opticsparameters">Instantiating OpticsParameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../faq.html#instantiating-opticsparameters-from-an-xtrack-line">Instantiating OpticsParameters from an <code class="xref py py-obj docutils literal notranslate"><span class="pre">xtrack.Line</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../faq.html#instantiating-opticsparameters-from-mad-x">Instantiating OpticsParameters from <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#instantiating-beamparameters">Instantiating BeamParameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../faq.html#do-i-need-a-full-matched-particle-distribution-for-beamparameters">Do I need a full matched particle distribution for <code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamParameters</span></code>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../faq.html#instantiating-beamparameters-from-an-xtrack-line">Instantiating BeamParameters from an <code class="xref py py-obj docutils literal notranslate"><span class="pre">xtrack.Line</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../faq.html#instantiating-beamparameters-from-mad-x">Instantiating BeamParameters from <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#geomettric-or-normalized-emittances">Geomettric or Normalized Emittances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#bunched-and-coasting-beams">Bunched and Coasting Beams</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Reference Bibliography</a></li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift"><nav aria-label="Mobile navigation menu" class="wy-nav-top">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="../index.html">xibs</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="Page navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Home" class="icon icon-home" href="../index.html"></a></li>
<li class="breadcrumb-item active">API Reference</li>
<li class="wy-breadcrumbs-aside">
<!-- User defined GitHub URL -->
<a class="fa fa-github" href="https://github.com/fsoubelet/xibs"> Edit on GitHub</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div itemprop="articleBody">
<section id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Link to this heading"></a></h1>
<section id="input-data-structures">
<span id="xibs-inputs"></span><h2>Input Data Structures<a class="headerlink" href="#input-data-structures" title="Link to this heading"></a></h2>
<p>Module with container dataclasses to encompass expected necessary inputs .
Various parts of <code class="docutils literal notranslate"><span class="pre">xibs</span></code> perform calculations based on beam and optics parameters.</p>
<p>The former is encompassed in a <code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamParameters</span></code> dataclass which is initiated from a generated <code class="xref py py-obj docutils literal notranslate"><span class="pre">xpart.Particles</span></code> object.
The latter is encompassed in an <code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code> dataclass which is initiated from the result of a <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> call on
the line (if in <code class="docutils literal notranslate"><span class="pre">xsuite</span></code>) or the sequence (if in <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code>).</p>
</section>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.inputs.</span></span><span class="sig-name descname"><span class="pre">BeamParameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dataclasses.InitVar</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'xpart.Particles'</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/inputs.html#BeamParameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Container dataclass for necessary beam parameters. It is initiated from
the <code class="xref py py-obj docutils literal notranslate"><span class="pre">xpart.Particles</span></code> object to track in your line with <code class="docutils literal notranslate"><span class="pre">xsuite</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>particles</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">xpart.Particles</span></code>) -- the generated particles to be tracked or used
in the line. This is an init-only parameter used for instanciation and
it will not be kept in the instance’s attributes.</p>
</dd>
<dt class="field-even">Attributes<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>n_part</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- number of simulated particles.</p></li>
<li><p><strong>particle_charge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- elementary particle charge, in # of Coulomb charges
(for instance 1 for electron or proton).</p></li>
<li><p><strong>particle_mass_eV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- particle mass in [eV].</p></li>
<li><p><strong>total_energy_eV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- total energy of the simulated particles in [eV].</p></li>
<li><p><strong>gamma_rel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- relativistic gamma of the simulated particles.</p></li>
<li><p><strong>beta_rel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- relativistic beta of the simulated particles.</p></li>
<li><p><strong>particle_classical_radius_m</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- the particles’ classical radius in [m].</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">xtrack.Line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_part</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">OpticsParameters</span></span></span><a class="reference internal" href="../_modules/xibs/inputs.html#BeamParameters.from_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.3.0.</span></p>
</div>
<p>Constructor to return a <code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamParameters</span></code> object from an <code class="xref py py-obj docutils literal notranslate"><span class="pre">Line</span></code> object.
This is a convenience method for the user, which will instantiate the class
from the line’s reference particle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">xtrack.Line</span></code>) -- an <code class="xref py py-obj docutils literal notranslate"><span class="pre">xtrack.Line</span></code>.</p></li>
<li><p><strong>n_part</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- number of particles to in the bunch. This is a mandatory
argument as it is not possible to infer it from <code class="xref py py-obj docutils literal notranslate"><span class="pre">line.particle_ref</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamParameters</span></code> object.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_madx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.15)"><span class="pre">cpymad.madx.Madx</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">BeamParameters</span></span></span><a class="reference internal" href="../_modules/xibs/inputs.html#BeamParameters.from_madx"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.3.0.</span></p>
</div>
<p>Constructor to return a <code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamParameters</span></code> object from a <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.15)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object.
This is a convenience method for the user, which essentially queries the relevant
information from the current sequence’s beam.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method will query parameters from the <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.15)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object. It will
get parameters from the current active sequence’s beam, and use these to create
an <code class="xref py py-obj docutils literal notranslate"><span class="pre">xpart.Particles</span></code> object from which to instanciate the <code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamParameters</span></code> object.
Note that the <code class="xref py py-obj docutils literal notranslate"><span class="pre">xpart</span></code> package is required to use this method.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.15)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- a <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.15)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> instance to created an <code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code>
object from.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamParameters</span></code> object.</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.inputs.</span></span><span class="sig-name descname"><span class="pre">OpticsParameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">twiss</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dataclasses.InitVar[typing.Union[ForwardRef('xtrack.twiss.TwissTable'),</span> <span class="pre">ForwardRef('pandas.DataFrame')]]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_slipfactor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dataclasses.InitVar</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_frev_hz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dataclasses.InitVar</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/inputs.html#OpticsParameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Container dataclass for necessary optics parameters. It is initiated from the results
of a <code class="xref py py-obj docutils literal notranslate"><span class="pre">twiss()</span></code> command with an <code class="xref py py-obj docutils literal notranslate"><span class="pre">xtrack.Line</span></code>, or result of a <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> call in
<code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> as a dataframe (as given by <code class="docutils literal notranslate"><span class="pre">cpymad</span></code> by default).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>twiss</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union["xtrack.twiss.TwissTable",</span> <span class="pre">pd.DataFrame]</span></code>) -- the resulting <code class="xref py py-obj docutils literal notranslate"><span class="pre">TwissTable</span></code>
of a <code class="xref py py-obj docutils literal notranslate"><span class="pre">twiss()</span></code> call on the <code class="xref py py-obj docutils literal notranslate"><span class="pre">xtrack.Line</span></code>, <strong>or</strong> the <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> table of the
<code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> sequence as a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>. Lowercase keys are expected. If
initiating from a <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> twiss, the next two arguments are required. This
is an init-only parameter used for instanciation and it will not be kept in
the instance’s attributes.</p></li>
<li><p><strong>_slipfactor</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Optional[float]</span></code>) -- the slip factor for the machine. Only required if
the <code class="docutils literal notranslate"><span class="pre">twiss</span></code> argument is a <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> twiss dataframe. See below for the sign
convention used.</p></li>
<li><p><strong>_frev_hz</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Optional[float]</span></code>) -- the revolution frequency for the machine in [Hz].
Only required if the <code class="docutils literal notranslate"><span class="pre">twiss</span></code> argument is a <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> twiss dataframe.</p></li>
</ul>
</dd>
<dt class="field-even">Attributes<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>s</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- longitudinal positions of the machine elements in [m].</p></li>
<li><p><strong>circumference</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- machine circumference in [m].</p></li>
<li><p><strong>slip_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- slip factor of the machine. We are using the Xsuite convention,
where the slip factor is <em>positive above transition</em>.</p></li>
<li><p><strong>revolution_frequency</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- revolution frequency of the machine in [Hz].</p></li>
<li><p><strong>betx</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- horizontal beta functions in [m].</p></li>
<li><p><strong>bety</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- vertical beta functions in [m].</p></li>
<li><p><strong>alfx</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- horizontal alpha functions.</p></li>
<li><p><strong>alfy</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- vertical alpha functions.</p></li>
<li><p><strong>dx</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- horizontal dispersion functions in [m].</p></li>
<li><p><strong>dy</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- vertical dispersion functions in [m].</p></li>
<li><p><strong>dpx</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- horizontal dispersion of px (d px / d delta).</p></li>
<li><p><strong>dpy</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- horizontal dispersion of py (d px / d delta).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">xtrack.Line</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">OpticsParameters</span></span></span><a class="reference internal" href="../_modules/xibs/inputs.html#OpticsParameters.from_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.3.0.</span></p>
</div>
<p>Constructor to return an <code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code> object from an <code class="xref py py-obj docutils literal notranslate"><span class="pre">Line</span></code> object.
This is a convenience method for the user, which will perform a <code class="xref py py-obj docutils literal notranslate"><span class="pre">twiss</span></code> call on
the provided line and return an <code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">xtrack.Line</span></code>) -- an <code class="xref py py-obj docutils literal notranslate"><span class="pre">xtrack.Line</span></code>.</p></li>
<li><p><strong>**kwargs</strong> -- any keyword argument will be transmitted to the <code class="xref py py-obj docutils literal notranslate"><span class="pre">line.twiss</span></code> call.
The default <code class="xref py py-obj docutils literal notranslate"><span class="pre">method</span></code> argument is <code class="docutils literal notranslate"><span class="pre">4d</span></code> but it can be overriden.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An <code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code> object.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_madx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.15)"><span class="pre">cpymad.madx.Madx</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">OpticsParameters</span></span></span><a class="reference internal" href="../_modules/xibs/inputs.html#OpticsParameters.from_madx"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.3.0.</span></p>
</div>
<p>Constructor to return an <code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code> object from a <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.15)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object.
This is a convenience method for the user, which essentially follows the steps described
in the <a class="reference internal" href="../faq.html#xibs-faq-optics-params-from-madx"><span class="std std-ref">FAQ</span></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method will query parameters from the <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.15)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object. It will
get parameters from the current active sequence, and make a <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> call for
said sequence.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.15)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- a <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.15)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> instance to created an <code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code>
object from.</p></li>
<li><p><strong>**kwargs</strong> -- any keyword argument will be transmitted to the <code class="xref py py-obj docutils literal notranslate"><span class="pre">madx.twiss</span></code> call.
The default <code class="xref py py-obj docutils literal notranslate"><span class="pre">centre</span></code> argument is <code class="docutils literal notranslate"><span class="pre">true</span></code> (recommended) but it can be overriden.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An <code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code> object.</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<section id="formalism-dispatch">
<span id="xibs-dispatch"></span><h2>Formalism Dispatch<a class="headerlink" href="#formalism-dispatch" title="Link to this heading"></a></h2>
<p>This module provides a single function, <code class="xref py py-obj docutils literal notranslate"><span class="pre">ibs</span></code>, to ease the class instantiation for the user. The function returns an
instance of the relevant IBS modelling class based on the desired formalism.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">xibs.dispatch.</span></span><span class="sig-name descname"><span class="pre">ibs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BeamParameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optics_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OpticsParameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">formalism</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">BjorkenMtingwaIBS</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NagaitsevIBS</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">KineticKickIBS</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">SimpleKickIBS</span></span></span><a class="reference internal" href="../_modules/xibs/dispatch.html#ibs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>A dispatch function to return the appropriate IBS modelling class based on the desired formalism.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beam_parameters</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">BeamParameters</span></code>) -- the beam parameters to use for the calculations. They will
be used to initialize the relevant IBS class.</p></li>
<li><p><strong>optics_params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">OpticsParameters</span></code>) -- the optics parameters to use for the calculations. They will be
used to initialize the relevant IBS class.</p></li>
<li><p><strong>formalism</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- the desired IBS modelling formalism. This determines which IBS class will be
returned. Valid options are: “bjorken-mtingwa” (or also “b&amp;m”), “nagaitsev”, “kinetic”, and
“simple”. This argument is case-insensitive. See the return annotation below for more details.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>An instance of the relevant IBS modelling class. The chosen class is determined by the <code class="xref py py-obj docutils literal notranslate"><span class="pre">formalism</span></code>
argument. Below are the various options and corresponding returned classes:</p>
<ul class="simple">
<li><p><strong>bjorken-mtingwa</strong> or <strong>b&amp;m</strong>: returns a <code class="xref py py-obj docutils literal notranslate"><span class="pre">BjorkenMtingwaIBS</span></code> instance (see <a class="reference internal" href="#xibs-analytical"><span class="std std-ref">IBS: Analytical Calculations</span></a>),
which implements the <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> analytical calculations for IBS growth rates that build on Bjorken &amp;
Mtingwa’s formalism to take in consideration vertical dispersion.</p></li>
<li><p><strong>nagaitsev</strong>: returns a <code class="xref py py-obj docutils literal notranslate"><span class="pre">NagaitsevIBS</span></code> instance (see <a class="reference internal" href="#xibs-analytical"><span class="std std-ref">IBS: Analytical Calculations</span></a>), which implements the
Nagaitsev analytical calculation for IBS growth rates. It is very fast, but does not take in
consideration the vertical dispersion.</p></li>
<li><p><strong>kinetic</strong>: returns a <code class="xref py py-obj docutils literal notranslate"><span class="pre">KineticKickIBS</span></code> instance (see <a class="reference internal" href="#xibs-kicks"><span class="std std-ref">IBS: Applying Kicks</span></a>), which implements the
kinetic kick-based formalism.</p></li>
<li><p><strong>simple</strong>: returns a <code class="xref py py-obj docutils literal notranslate"><span class="pre">SimpleKickIBS</span></code> instance (see <a class="reference internal" href="#xibs-kicks"><span class="std std-ref">IBS: Applying Kicks</span></a>), which implements the kick
formalism from Nagaitsev analytical values.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xibs</span> <span class="kn">import</span> <span class="n">ibs</span><span class="p">,</span> <span class="n">BeamParameters</span><span class="p">,</span> <span class="n">OpticsParameters</span>

<span class="c1"># Here is where you would define your inputs</span>
<span class="n">beam_params</span> <span class="o">=</span> <span class="n">BeamParameters</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">optics</span> <span class="o">=</span> <span class="n">OpticsParameters</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># Get the proper modelling class based on the demanded formalism</span>
<span class="n">BM_IBS</span> <span class="o">=</span> <span class="n">ibs</span><span class="p">(</span><span class="n">beam_params</span><span class="p">,</span> <span class="n">optics</span><span class="p">,</span> <span class="n">formalism</span><span class="o">=</span><span class="s2">"b&amp;m"</span><span class="p">)</span>  <span class="c1"># a BjorkenMtingwaIBS instance</span>
<span class="n">NAGAITSEV_IBS</span> <span class="o">=</span> <span class="n">ibs</span><span class="p">(</span><span class="n">beam_params</span><span class="p">,</span> <span class="n">optics</span><span class="p">,</span> <span class="n">formalism</span><span class="o">=</span><span class="s2">"nagaitsev"</span><span class="p">)</span>  <span class="c1"># a NagaitsevIBS instance</span>
<span class="n">KINETIC_IBS</span> <span class="o">=</span> <span class="n">ibs</span><span class="p">(</span><span class="n">beam_params</span><span class="p">,</span> <span class="n">optics</span><span class="p">,</span> <span class="n">formalism</span><span class="o">=</span><span class="s2">"kinetic"</span><span class="p">)</span>  <span class="c1"># a KineticKickIBS instance</span>
<span class="n">SIMPLE_IBS</span> <span class="o">=</span> <span class="n">ibs</span><span class="p">(</span><span class="n">beam_params</span><span class="p">,</span> <span class="n">optics</span><span class="p">,</span> <span class="n">formalism</span><span class="o">=</span><span class="s2">"simple"</span><span class="p">)</span>  <span class="c1"># a SimpleKickIBS instance</span>
</pre></div>
</div>
</div>
</dd></dl>
<section id="ibs-analytical-calculations">
<span id="xibs-analytical"></span><h2>IBS: Analytical Calculations<a class="headerlink" href="#ibs-analytical-calculations" title="Link to this heading"></a></h2>
<p>Module with functionality to perform analytical IBS calculations, either according to either Nagaitsev’s or Bjorken &amp; Mtingwa’s formalism.
User-facing classes are provided which allow to compute the growth rates based on beam parameters and machine optics.
The formalism from which formulas and calculations are implemented can be found in <span id="id1">[<a class="reference internal" href="../bibliography.html#id3" title="Sergei Nagaitsev. Intrabeam Scattering Formulas for Fast Numerical Evaluation. Phys. Rev. ST Accel. Beams, 8:064403, 5 2005. URL: https://link.aps.org/doi/10.1103/PhysRevSTAB.8.064403, doi:10.1103/PhysRevSTAB.8.064403.">Nag05</a>]</span> and <span id="id2">[<a class="reference internal" href="../bibliography.html#id2" title="F. Antoniou and F. Zimmermann. Revision of Intrabeam Scattering with Non-Ultrarelativistic Corrections and Vertical Dispersion for MAD-X. Technical Report, Cern, Geneva, 2012. URL: https://cds.cern.ch/record/1445924.">AZ12</a>]</span>, respectively.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please note that these analytical implementations make the assumptions.
Should your scenario not satisfy the following assumptions, the results might not be accurate:</p>
<blockquote>
<div><ul class="simple">
<li><p>It is assumed that beam profiles are Gaussian,</p></li>
<li><p>It is assumed that no betatron coupling is present in the machine.</p></li>
</ul>
</div></blockquote>
</div>
</section>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.analytical.</span></span><span class="sig-name descname"><span class="pre">AnalyticalIBS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BeamParameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OpticsParameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/analytical.html#AnalyticalIBS"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.4.0.</span></p>
</div>
<p>Abstract base class for analytical IBS calculations, from which all
implementations inherit.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beam_parameters</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">BeamParameters</span></code>) -- the beam parameters to use for the calculations.</p></li>
<li><p><strong>optics</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">OpticsParameters</span></code>) -- the optics parameters to use for the calculations.</p></li>
<li><p><strong>ibs_growth_rates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">IBSGrowthRates</span></code>) -- the computed IBS growth rates. This self-updates
when they are computed with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">growth_rates</span></code> method.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">coulomb_log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">epsx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunch_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunched</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalized_emittances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></span><a class="reference internal" href="../_modules/xibs/analytical.html#AnalyticalIBS.coulomb_log"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Calculates the Coulomb logarithm based on the beam parameters and optics the class
was initiated with. For a good introductory resource on the Coulomb Log, see:
<a class="reference external" href="https://docs.plasmapy.org/en/stable/notebooks/formulary/coulomb.html">https://docs.plasmapy.org/en/stable/notebooks/formulary/coulomb.html</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function follows the formulae in <span id="id3">[<a class="reference internal" href="../bibliography.html#id7" title="H. L, Anderson. AIP 50th Anniversary: Physics Vade Mecum. American Institute of Physics, 1981. ISBN 978-0883182895.">HLAnderson81</a>]</span>. The
Coulomb log is computed as <span class="math notranslate nohighlight">\(\ln \left( \Lambda \right) = \ln(r_{max} / r_{min})\)</span>.
Here <span class="math notranslate nohighlight">\(r_{max}\)</span> denotes the smaller of <span class="math notranslate nohighlight">\(\sigma_x\)</span> and the Debye length; while
<span class="math notranslate nohighlight">\(r_{min}\)</span> is the larger of the classical distance of closest approach and the
quantum diffraction limit from the nuclear radius. It is the calculation that is done by
<code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> (see the <code class="xref py py-obj docutils literal notranslate"><span class="pre">twclog</span></code> subroutine in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">MAD-X/src/ibsdb.f90</span></code> source file).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both geometric or normalized emittances can be given as input to this function, and it is assumed
the user provides geomettric emittances. If normalized ones are given the <code class="xref py py-obj docutils literal notranslate"><span class="pre">normalized_emittances</span></code>
parameter should be set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> (it defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>). Internally, a conversion is done to
geometric emittances, which are used in the computations.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>epsx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- horizontal geometric or normalized emittance in [m].</p></li>
<li><p><strong>epsy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- vertical geometric or normalized emittance in [m].</p></li>
<li><p><strong>sigma_delta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- momentum spread.</p></li>
<li><p><strong>bunch_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- bunch length in [m].</p></li>
<li><p><strong>bunched</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- whether the beam is bunched or not (coasting). Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
<li><p><strong>normalized_emittances</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- whether the provided emittances are
normalized or not. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> (assume geometric emittances).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The dimensionless Coulomb logarithm <span class="math notranslate nohighlight">\(\ln \left( \Lambda \right)\)</span>.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">emittance_evolution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">epsx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunch_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalized_emittances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/xibs/analytical.html#AnalyticalIBS.emittance_evolution"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Analytically computes the new emittances after a given time step <code class="xref py py-obj docutils literal notranslate"><span class="pre">dt</span></code> has
ellapsed, from initial values, based on the <code class="docutils literal notranslate"><span class="pre">IBS</span></code> growth rates.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This calculation is done by building on the <code class="docutils literal notranslate"><span class="pre">IBS</span></code> growth rates. If the
latter have not been computed yet, this method will raise an error. Please
remember to call the instance’s <code class="xref py py-obj docutils literal notranslate"><span class="pre">growth_rates</span></code> method first.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>The calculation is an exponential growth based on the rates <span class="math notranslate nohighlight">\(T_{x,y,z}\)</span>. It goes
according to the following, where <span class="math notranslate nohighlight">\(N\)</span> represents the time step:</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}T_{x,y,z} &amp;= 1 / \tau_{x,y,z}\\\varepsilon_{x,y}^{N+1} &amp;= \varepsilon_{x,y}^{N} * e^{t / \tau_{x,y}}\\\sigma_{\delta, z}^{N+1} &amp;= \sigma_{\delta, z}^{N} * e^{t / 2 \tau_{z}}\end{aligned}\end{align} \]</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both geometric or normalized emittances can be given as input to this function, and it is assumed
the user provides geomettric emittances. If normalized ones are given the <code class="xref py py-obj docutils literal notranslate"><span class="pre">normalized_emittances</span></code>
parameter should be set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> (it defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>). Internally, a conversion is done to
geometric emittances, which are used in the computations. The returned emittances correspond to
the type of those provided: if given normalized emittances this function will return values that
correspond to the new normalized emittances.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>epsx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- horizontal geometric or normalized emittance in [m].</p></li>
<li><p><strong>epsy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- vertical geometric or normalized emittance in [m].</p></li>
<li><p><strong>sigma_delta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- momentum spread.</p></li>
<li><p><strong>dt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float,</span> <span class="pre">optional</span></code>) -- the time interval to use, in [s]. Default to the inverse
of the revolution frequency, <span class="math notranslate nohighlight">\(1 / f_{rev}\)</span>.</p></li>
<li><p><strong>bunch_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- the bunch length in [m].</p></li>
<li><p><strong>normalized_emittances</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- whether the provided emittances are
normalized or not. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> (assume geometric emittances).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.12)"><strong>AttributeError</strong></a> -- if the <code class="docutils literal notranslate"><span class="pre">IBS</span></code> growth rates have not yet been computed.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A tuple with the new horizontal &amp; vertical geometric emittances, the new
momentum spread and the new bunch length, after the time step has ellapsed.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">growth_rates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">epsx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunch_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunched</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalized_emittances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">IBSGrowthRates</span></span></span><a class="reference internal" href="../_modules/xibs/analytical.html#AnalyticalIBS.growth_rates"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Method to compute the IBS growth rates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>epsx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- horizontal geometric or normalized emittance in [m].</p></li>
<li><p><strong>epsy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- vertical geometric or normalized emittance in [m].</p></li>
<li><p><strong>sigma_delta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- momentum spread.</p></li>
<li><p><strong>bunch_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- the bunch length in [m].</p></li>
<li><p><strong>bunched</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- whether the beam is bunched or not (coasting). Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
<li><p><strong>normalized_emittances</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- whether the provided emittances are
normalized or not. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> (assume geometric emittances).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An <code class="xref py py-obj docutils literal notranslate"><span class="pre">IBSGrowthRates</span></code> object with the computed growth rates for each plane.</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.analytical.</span></span><span class="sig-name descname"><span class="pre">BjorkenMtingwaIBS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BeamParameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OpticsParameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/analytical.html#BjorkenMtingwaIBS"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.3.0.</span></p>
</div>
<p>A single class to compute the IBS growth rates according to the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Bjorken</span> <span class="pre">&amp;</span> <span class="pre">Mtingwa</span></code> formalism.
The exact approach follows the <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> implementation, which has corrected B&amp;M in order to
take in consideration the vertical dispersion values (see the relevant note about the changes
at <span id="id4">[<a class="reference internal" href="../bibliography.html#id2" title="F. Antoniou and F. Zimmermann. Revision of Intrabeam Scattering with Non-Ultrarelativistic Corrections and Vertical Dispersion for MAD-X. Technical Report, Cern, Geneva, 2012. URL: https://cds.cern.ch/record/1445924.">AZ12</a>]</span>). It initiates from a <code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamParameters</span></code> and an
<code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code> objects.</p>
<p>See the <a class="reference internal" href="../gallery/demo_analytical_bjorken_mtingwa_emittances.html#demo-analytical-bjorken-mtingwa"><span class="std std-ref">Bjorken-Mtingwa example</span></a> for detailed usage,
and the <a class="reference internal" href="../gallery/demo_analytical_nagaitsev_emittances.html#demo-analytical-nagaitsev"><span class="std std-ref">Nagaitsev example</span></a> for a comparison to the Nagaitsev
formalism.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If possible, when creating the <code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code> to initiate this class, please do so
by providing the <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> values calculated at the center of elements. This is done by
giving the flag <code class="xref py py-obj docutils literal notranslate"><span class="pre">centre=true</span></code> to the <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> command in <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code>, for instance. If
this isn’t done, a warning will be issued that one might observe some slight discrepancies
against <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> result values.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beam_parameters</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">BeamParameters</span></code>) -- the beam parameters to use for the calculations.</p></li>
<li><p><strong>optics</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">OpticsParameters</span></code>) -- the optics parameters to use for the calculations.</p></li>
<li><p><strong>ibs_growth_rates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">IBSGrowthRates</span></code>) -- the computed IBS growth rates. This self-updates
when they are computed with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">growth_rates</span></code> method.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">growth_rates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">epsx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunch_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunched</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalized_emittances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration_intervals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">17</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">IBSGrowthRates</span></span></span><a class="reference internal" href="../_modules/xibs/analytical.html#BjorkenMtingwaIBS.growth_rates"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.3.0.</span></p>
</div>
<p>Computes the <code class="docutils literal notranslate"><span class="pre">IBS</span></code> growth rates, named <span class="math notranslate nohighlight">\(T_x, T_y\)</span> and <span class="math notranslate nohighlight">\(T_z\)</span> in this code
base. These correspond to the <span class="math notranslate nohighlight">\(1 / \tau\)</span> term, for each plane <span class="math notranslate nohighlight">\(x, y\)</span> and
<span class="math notranslate nohighlight">\(z\)</span>, respectively. The instance attribute <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.ibs_growth_rates</span></code> is automatically
updated with the results of this method when it is called.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When creating the <code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code> to initiate this class, please do so by providing
the <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> values calculated at the center of elements. This is done by giving the
flag <code class="xref py py-obj docutils literal notranslate"><span class="pre">centre=true</span></code> to the <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> command in <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> for instance. If not, one might
observe some slight discrepancies with the <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> values.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>The calculation is done according to the following steps, which are related to different
equations in <span id="id5">[<a class="reference internal" href="../bibliography.html#id2" title="F. Antoniou and F. Zimmermann. Revision of Intrabeam Scattering with Non-Ultrarelativistic Corrections and Vertical Dispersion for MAD-X. Technical Report, Cern, Geneva, 2012. URL: https://cds.cern.ch/record/1445924.">AZ12</a>]</span>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Adjusts the <span class="math notranslate nohighlight">\(D_x, D_y, D^{\prime}_{x}, D^{\prime}_{y}\)</span> terms (multiply by <span class="math notranslate nohighlight">\(\beta_{rel}\)</span>) to be in the <span class="math notranslate nohighlight">\(pt\)</span> frame.</p></li>
<li><p>Computes the various terms from Table 1 of the MAD-X note.</p></li>
<li><p>Computes the Coulomb logarithm and the common constant term (first fraction) of Eq (8).</p></li>
<li><p>Defines the integrands of integrals in Eq (8) of the MAD-X note.</p></li>
<li><p>Defines sub-intervals and integrates the above over all of them, getting growth rates at each element in the lattice.</p></li>
<li><p>Averages the results over the full circumference of the machine.</p></li>
</ul>
</div></blockquote>
</div>
<div class="admonition-geometric-or-normalized-emittances admonition">
<p class="admonition-title">Geometric or Normalized Emittances</p>
<p>Both geometric or normalized emittances can be given as input to this function, and it is assumed
the user provides geomettric emittances. If normalized ones are given the <code class="xref py py-obj docutils literal notranslate"><span class="pre">normalized_emittances</span></code>
parameter should be set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> (it defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>). Internally, a conversion is done to
geometric emittances, which are used in the computations. For more information please see the
following <a class="reference internal" href="../faq.html#xibs-faq-geom-norm-emittances"><span class="std std-ref">section of the FAQ</span></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>epsx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- horizontal geometric or normalized emittance in [m].</p></li>
<li><p><strong>epsy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- vertical geometric or normalized emittance in [m].</p></li>
<li><p><strong>sigma_delta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- momentum spread.</p></li>
<li><p><strong>bunch_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- the bunch length in [m].</p></li>
<li><p><strong>bunched</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- whether the beam is bunched or not (coasting). Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
<li><p><strong>normalized_emittances</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- whether the provided emittances are
normalized or not. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> (assume geometric emittances).</p></li>
<li><p><strong>integration_intervals</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- the number of sub-intervals to use when integrating the
integrands of Eq (8) of the MAD-X note. Please DO NOT change this parameter unless
you know exactly what you are doing, as you might affect convergence. Defaults to 17.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An <code class="xref py py-obj docutils literal notranslate"><span class="pre">IBSGrowthRates</span></code> object with the computed growth rates for each plane.</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.analytical.</span></span><span class="sig-name descname"><span class="pre">IBSGrowthRates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Tx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ty</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">Tz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/analytical.html#IBSGrowthRates"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Container dataclass for IBS growth rates results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Tx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- horizontal IBS growth rate.</p></li>
<li><p><strong>Ty</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- vertical IBS growth rate.</p></li>
<li><p><strong>Tz</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- longitudinal IBS growth rate.</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.analytical.</span></span><span class="sig-name descname"><span class="pre">NagaitsevIBS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BeamParameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OpticsParameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/analytical.html#NagaitsevIBS"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>A single class to compute Nagaitsev integrals (see
<span id="id6">[<a class="reference internal" href="../bibliography.html#id3" title="Sergei Nagaitsev. Intrabeam Scattering Formulas for Fast Numerical Evaluation. Phys. Rev. ST Accel. Beams, 8:064403, 5 2005. URL: https://link.aps.org/doi/10.1103/PhysRevSTAB.8.064403, doi:10.1103/PhysRevSTAB.8.064403.">Nag05</a>]</span>)
and IBS growth rates. It initiates from a <code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamParameters</span></code> and an <code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code> objects.</p>
<p>See the <a class="reference internal" href="../gallery/demo_analytical_nagaitsev_emittances.html#demo-analytical-nagaitsev"><span class="std std-ref">Nagaitsev example</span></a> for detailed usage, and the
<a class="reference internal" href="../gallery/demo_analytical_bjorken_mtingwa_emittances.html#demo-analytical-bjorken-mtingwa"><span class="std std-ref">Bjorken-Mtingwa example</span></a> for a comparison to the
Bjorken-Mtingwa formalism.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beam_parameters</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">BeamParameters</span></code>) -- the beam parameters to use for the calculations.</p></li>
<li><p><strong>optics</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">OpticsParameters</span></code>) -- the optics parameters to use for the calculations.</p></li>
<li><p><strong>elliptic_integrals</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">NagaitsevIntegrals</span></code>) -- the computed elliptic integrals. This
self-updates when they are computed with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">integrals</span></code> method.</p></li>
<li><p><strong>ibs_growth_rates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">IBSGrowthRates</span></code>) -- the computed IBS growth rates. This self-updates
when they are computed with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">growth_rates</span></code> method.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">growth_rates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">epsx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunch_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunched</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalized_emittances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compute_integrals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">IBSGrowthRates</span></span></span><a class="reference internal" href="../_modules/xibs/analytical.html#NagaitsevIBS.growth_rates"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Computes the <code class="docutils literal notranslate"><span class="pre">IBS</span></code> growth rates, named <span class="math notranslate nohighlight">\(T_x, T_y\)</span> and <span class="math notranslate nohighlight">\(T_z\)</span> in this
code base, from Nagaitsev integrals. These correspond to the <span class="math notranslate nohighlight">\(1 / \tau\)</span> term,
for each plane, of Eq (28) in <span id="id7">[<a class="reference internal" href="../bibliography.html#id3" title="Sergei Nagaitsev. Intrabeam Scattering Formulas for Fast Numerical Evaluation. Phys. Rev. ST Accel. Beams, 8:064403, 5 2005. URL: https://link.aps.org/doi/10.1103/PhysRevSTAB.8.064403, doi:10.1103/PhysRevSTAB.8.064403.">Nag05</a>]</span>,
respectively. The instance attribute <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.ibs_growth_rates</span></code> is automatically updated
with the results of this method when it is called.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently this calculation does not take into account vertical dispersion. Should you have
any in your lattice, please use the BjorkenMtingwaIBS class instead, which supports it fully.
Supporting vertical dispersion in NagaitsevIBS might be implemented in a future version.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>The calculation is done according to the following steps, which are related to different
equations in <span id="id8">[<a class="reference internal" href="../bibliography.html#id3" title="Sergei Nagaitsev. Intrabeam Scattering Formulas for Fast Numerical Evaluation. Phys. Rev. ST Accel. Beams, 8:064403, 5 2005. URL: https://link.aps.org/doi/10.1103/PhysRevSTAB.8.064403, doi:10.1103/PhysRevSTAB.8.064403.">Nag05</a>]</span>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Get the Nagaitsev integrals from the instance attributes (integrals of Eq (30-32)).</p></li>
<li><p>Computes the Coulomb logarithm for the defined beam and optics parameters.</p></li>
<li><p>Compute the rest of the constant term of Eq (30-32).</p></li>
<li><p>Compute for each plane the full result of Eq (30-32), respectively.</p></li>
<li><p>Plug these into Eq (28) and divide by either <span class="math notranslate nohighlight">\(\varepsilon_x, \varepsilon_y\)</span> or <span class="math notranslate nohighlight">\(\sigma_{\delta}^{2}\)</span> (as relevant) to get <span class="math notranslate nohighlight">\(1 / \tau\)</span>.</p></li>
</ul>
</div></blockquote>
<p><strong>Note:</strong> As one can see above, this calculation is done by building on the Nagaitsev integrals.
If these have not been computed yet, this method will first log a message and compute them, then
compute the growth rates.</p>
</div>
<div class="admonition-geometric-or-normalized-emittances admonition">
<p class="admonition-title">Geometric or Normalized Emittances</p>
<p>Both geometric or normalized emittances can be given as input to this function, and it is assumed
the user provides geomettric emittances. If normalized ones are given the <code class="xref py py-obj docutils literal notranslate"><span class="pre">normalized_emittances</span></code>
parameter should be set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> (it defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>). Internally, a conversion is done to
geometric emittances, which are used in the computations. For more information please see the
following <a class="reference internal" href="../faq.html#xibs-faq-geom-norm-emittances"><span class="std std-ref">section of the FAQ</span></a>.</p>
</div>
<div class="admonition-coasting-beams admonition">
<p class="admonition-title">Coasting Beams</p>
<p>It is possible in this formalism to get an approximation in the case of coasting beams by providing
<code class="xref py py-obj docutils literal notranslate"><span class="pre">bunched=False</span></code>. This will as a bunch length <span class="math notranslate nohighlight">\(C / 2 \pi\)</span> with C the circumference (or length)
of the machine, and a warning will be logged for the user. Additionally the appropriate adjustement
will be made in the Coulomb logarithm calculation, and the resulting growth rates will be divided by
a factor 2 before being returned (see <span id="id9">[<a class="reference internal" href="../bibliography.html#id8" title="Intra-beam-scattering, May 1974. URL: https://cds.cern.ch/record/400720, doi:10.5170/cern-1992-001.226.">ICH74</a>]</span>). For fully accurate
results in the case of coasting beams, please use the <code class="xref py py-obj docutils literal notranslate"><span class="pre">BjorkenMtingwaIBS</span></code> class instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>epsx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- horizontal geometric or normalized emittance in [m].</p></li>
<li><p><strong>epsy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- vertical geometric or normalized emittance in [m].</p></li>
<li><p><strong>sigma_delta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- momentum spread.</p></li>
<li><p><strong>bunch_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- the bunch length in [m].</p></li>
<li><p><strong>bunched</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- whether the beam is bunched or not (coasting). Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>. Please note
that this will do an approximation using <code class="xref py py-obj docutils literal notranslate"><span class="pre">bunch_length=C/(2*pi)</span></code>. For fully accurate results
in the case of coasting beams, please use the BjorkenMtingwaIBS class instead.</p></li>
<li><p><strong>normalized_emittances</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- whether the provided emittances are
normalized or not. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> (assume geometric emittances).</p></li>
<li><p><strong>compute_integrals</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, the Nagaitsev elliptic integrals will be computed
before the growth rates. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>. New in version 0.3.0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An <code class="xref py py-obj docutils literal notranslate"><span class="pre">IBSGrowthRates</span></code> object with the computed growth rates for each plane.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">integrals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">epsx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalized_emittances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">NagaitsevIntegrals</span></span></span><a class="reference internal" href="../_modules/xibs/analytical.html#NagaitsevIBS.integrals"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Computes the Nagaitsev integrals, named <span class="math notranslate nohighlight">\(I_x, I_y\)</span> and <span class="math notranslate nohighlight">\(I_z\)</span> in this code base.</p>
<p>These correspond to the integrals inside of Eq (32), (31) and (30) in
<span id="id10">[<a class="reference internal" href="../bibliography.html#id3" title="Sergei Nagaitsev. Intrabeam Scattering Formulas for Fast Numerical Evaluation. Phys. Rev. ST Accel. Beams, 8:064403, 5 2005. URL: https://link.aps.org/doi/10.1103/PhysRevSTAB.8.064403, doi:10.1103/PhysRevSTAB.8.064403.">Nag05</a>]</span>, respectively.
The instance attribute <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.elliptic_integrals</span></code> is automatically updated
with the results of this method. It is used for other calculations.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>The calculation is done according to the following steps, which are related to different
equations in <span id="id11">[<a class="reference internal" href="../bibliography.html#id3" title="Sergei Nagaitsev. Intrabeam Scattering Formulas for Fast Numerical Evaluation. Phys. Rev. ST Accel. Beams, 8:064403, 5 2005. URL: https://link.aps.org/doi/10.1103/PhysRevSTAB.8.064403, doi:10.1103/PhysRevSTAB.8.064403.">Nag05</a>]</span>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Computes various intermediate terms and then <span class="math notranslate nohighlight">\(a_x, a_y, a_s, a_1\)</span> and <span class="math notranslate nohighlight">\(a_2\)</span> constants from Eq (18-21).</p></li>
<li><p>Computes the eigenvalues <span class="math notranslate nohighlight">\(\lambda_1, \lambda_2\)</span> of the <span class="math notranslate nohighlight">\(\bf{A}\)</span> matrix (<span class="math notranslate nohighlight">\(\bf{L}\)</span> matrix in B&amp;M) from Eq (22-24).</p></li>
<li><p>Computes the <span class="math notranslate nohighlight">\(R_1, R_2\)</span> and <span class="math notranslate nohighlight">\(R_3\)</span> terms from Eq (25-27) with the forms of Eq (5-6).</p></li>
<li><p>Computes the <span class="math notranslate nohighlight">\(S_p, S_x\)</span> and <span class="math notranslate nohighlight">\(S_{xp}\)</span> terms from Eq (33-35).</p></li>
<li><p>Computes and returns the integrals terms in Eq (30-32).</p></li>
</ul>
</div></blockquote>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both geometric or normalized emittances can be given as input to this function, and it is assumed
the user provides geomettric emittances. If normalized ones are given the <code class="xref py py-obj docutils literal notranslate"><span class="pre">normalized_emittances</span></code>
parameter should be set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> (it defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>). Internally, a conversion is done to
geometric emittances, which are used in the computations.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>epsx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- horizontal geometric or normalized emittance in [m].</p></li>
<li><p><strong>epsy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- vertical geometric or normalized emittance in [m].</p></li>
<li><p><strong>sigma_delta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- momentum spread. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p><strong>normalized_emittances</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- whether the provided emittances are
normalized or not. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> (assume geometric emittances).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">NagaitsevIntegrals</span></code> object with the computed integrals for each plane.</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.analytical.</span></span><span class="sig-name descname"><span class="pre">NagaitsevIntegrals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">Iy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">Iz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/analytical.html#NagaitsevIntegrals"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Container dataclass for Nagaitsev integrals results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Ix</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- horizontal Nagaitsev integral.</p></li>
<li><p><strong>Iy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- vertical Nagaitsev integral.</p></li>
<li><p><strong>Iz</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- longitudinal Nagaitsev integral.</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<section id="ibs-applying-kicks">
<span id="xibs-kicks"></span><h2>IBS: Applying Kicks<a class="headerlink" href="#ibs-applying-kicks" title="Link to this heading"></a></h2>
<p>Module with user-facing API to compute relevant terms to IBS kicks according to different formalism: simple and kinetic kicks.</p>
<p>In the simple formalism, the applied IBS kicks are determined from analytical IBS growth rates, which are computed internally (see <a class="reference internal" href="#xibs-analytical"><span class="std std-ref">IBS: Analytical Calculations</span></a>).
In the kinetic formalism, which adapts the kinetic theory of gases, the applied IBS kicks are determined from computed diffusion and friction terms.</p>
</section>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.kicks.</span></span><span class="sig-name descname"><span class="pre">DiffusionCoefficients</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Dx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">Dy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">Dz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/kicks.html#DiffusionCoefficients"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Container dataclass for kinetic IBS diffusion coefficients.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Dx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- horizontal diffusion coefficient.</p></li>
<li><p><strong>Dy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- vertical diffusion coefficient.</p></li>
<li><p><strong>Dz</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- longitudinal diffusion coefficient.</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.kicks.</span></span><span class="sig-name descname"><span class="pre">FrictionCoefficients</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Fx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">Fy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">Fz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/kicks.html#FrictionCoefficients"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Container dataclass for kinetic IBS friction coefficients.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Fx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- horizontal friction coefficient.</p></li>
<li><p><strong>Fy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- vertical friction coefficient.</p></li>
<li><p><strong>Fz</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- longitudinal friction coefficient.</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.kicks.</span></span><span class="sig-name descname"><span class="pre">IBSKickCoefficients</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Kx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ky</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">Kz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/kicks.html#IBSKickCoefficients"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Container dataclass for all IBS kick coefficients. These can be the coeffients from simple kicks,
computed from analytical growth rates, or kinetic coefficients computed from the diffusion and
friction ones according to <span id="id12">[<a class="reference internal" href="../bibliography.html#id5" title="Zenkevich P, Boine-Frankenheim O, and Bolshakov A. A new Algorithm for the Kinetic Analysis of Intra-Beam Scattering in Storage Rings. Nuclear Instruments and Methods in Physics Research Section A: Accelerators, Spectrometers, Detectors and Associated Equipment, 561(2):284–288, 2006. URL: https://doi.org/10.1016/j.nima.2006.01.013, doi:10.1016/j.nima.2006.01.013.">POA06</a>]</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Kx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- horizontal kick coefficient.</p></li>
<li><p><strong>Ky</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- vertical kick coefficient.</p></li>
<li><p><strong>Kz</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- longitudinal kick coefficient.</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.kicks.</span></span><span class="sig-name descname"><span class="pre">KickBasedIBS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BeamParameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OpticsParameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/kicks.html#KickBasedIBS"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<p>Abstract base class for kick-based IBS effects, from which all
implementations inherit.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beam_parameters</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">BeamParameters</span></code>) -- the beam parameters to use for IBS computations.</p></li>
<li><p><strong>optics</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">OpticsParameters</span></code>) -- the optics parameters to use for the IBS computations.</p></li>
<li><p><strong>kick_coefficients</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">IBSKickCoefficients</span></code>) -- the computed IBS kick coefficients. This
attribute self-updates when they are computed with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_kick_coefficients</span></code>
method. It can also be set manually.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">apply_ibs_kick</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">xpart.Particles</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/xibs/kicks.html#KickBasedIBS.apply_ibs_kick"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<p>Abstract method to determine and apply IBS kicks to a <code class="xref py py-obj docutils literal notranslate"><span class="pre">xpart.Particles</span></code> object. The
momenta kicks are determined from the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.kick_coefficients</span></code> attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>particles</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">xpart.Particles</span></code>) -- the particles to apply the IBS kicks to.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.12)"><strong>AttributeError</strong></a> -- if the <code class="docutils literal notranslate"><span class="pre">IBS</span></code> kick coefficients have not yet been computed.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">compute_kick_coefficients</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">xpart.Particles</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">IBSKickCoefficients</span></span></span><a class="reference internal" href="../_modules/xibs/kicks.html#KickBasedIBS.compute_kick_coefficients"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<p>Abstract method to determine the kick coefficients used in the determination of the IBS
to be applied. It returns an <code class="xref py py-obj docutils literal notranslate"><span class="pre">IBSKickCoefficients</span></code> object with the computed coefficients.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>particles</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">xpart.Particles</span></code>) -- the particles to apply the IBS kicks to.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">line_density</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">xpart.Particles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_slices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">ArrayLike</span></span></span><a class="reference internal" href="../_modules/xibs/kicks.html#KickBasedIBS.line_density"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<p>Returns the “line density” of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Particles</span></code> object, along its longitudinal axis, which
corresponds to the <span class="math notranslate nohighlight">\(\rho_t(t)\)</span> term in Eq (8) of <span id="id13">[<a class="reference internal" href="../bibliography.html#id6" title="Bruce R, Jowett J. M, Blaskiewicz M, and Fischer W. Time Evolution of the Luminosity of Colliding Heavy-Ion Beams in BNL Relativistic Heavy Ion Collider and CERN Large Hadron Collider. Physical Review Special Topics - Accelerators and Beams, 2010. URL: https://doi.org/10.1103/physrevstab.13.091001, doi:10.1103/physrevstab.13.091001.">RJMMW10</a>]</span>.
The density is used as a weight factor for the application of IBS kicks: particles in the
denser parts of the bunch will receive a larger kick, and vice versa. See section III.C of
the above reference details.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>The calculation is done according to the following steps:</p>
<blockquote>
<div><ul class="simple">
<li><p>Gets the longitudinal coordinates of the active particles (state &gt; 0) in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Particles</span></code> object.</p></li>
<li><p>Determines coordinate cuts at front and back of the bunch, as well as slice width.</p></li>
<li><p>Determines bin edges and bin centers for the distribution for the chosen number of slices.</p></li>
<li><p>Computes a (normalized) histogram of the longitudinal coordinates, with the determined bins.</p></li>
<li><p>Computes and returns the line density <span class="math notranslate nohighlight">\(\rho_t(t)\)</span>.</p></li>
</ul>
</div></blockquote>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>particles</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">xpart.Particles</span></code>) -- the <code class="xref py py-obj docutils literal notranslate"><span class="pre">xpart.Particles</span></code> object to compute the line density for.</p></li>
<li><p><strong>n_slices</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- the number of slices to use for the computation of the bins.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An array with the density values for each slice / bin of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Particles</span></code> object.</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.kicks.</span></span><span class="sig-name descname"><span class="pre">KineticKickIBS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BeamParameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OpticsParameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/kicks.html#KineticKickIBS"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<p>A single class to compute the IBS diffusion and friction coefficients according
to the kinetic IBS formalism of <span id="id14">[<a class="reference internal" href="../bibliography.html#id5" title="Zenkevich P, Boine-Frankenheim O, and Bolshakov A. A new Algorithm for the Kinetic Analysis of Intra-Beam Scattering in Storage Rings. Nuclear Instruments and Methods in Physics Research Section A: Accelerators, Spectrometers, Detectors and Associated Equipment, 561(2):284–288, 2006. URL: https://doi.org/10.1016/j.nima.2006.01.013, doi:10.1016/j.nima.2006.01.013.">POA06</a>]</span>.
The class initiates from a <code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamParameters</span></code> and an <code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code> objects.</p>
<p>See the <span class="xref std std-ref">kinetic kicks example</span> for detailed usage.</p>
<p>TODO: reference, details etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beam_parameters</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">BeamParameters</span></code>) -- the beam parameters to use for IBS computations.</p></li>
<li><p><strong>optics</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">OpticsParameters</span></code>) -- the optics parameters to use for the IBS computations.</p></li>
<li><p><strong>diffusion_coefficients</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DiffusionCoefficients</span></code>) -- the computed diffusion coefficients
from the kinetic theory. This attribute self-updates when coefficients are computed
with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_kick_coefficients</span></code> method. It can also be set manually.</p></li>
<li><p><strong>friction_coefficients</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">FrictionCoefficients</span></code>) -- the computed friction coefficients
from the kinetic theory. This attribute self-updates when coefficients are computed
with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_kick_coefficients</span></code> method. It can also be set manually.</p></li>
<li><p><strong>kick_coefficients</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">IBSKickCoefficients</span></code>) -- the computed IBS kick coefficients from
the kinetic theory, determined from the diffusion and friction coefficients. This
attribute self-updates when coefficients are computed with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_kick_coefficients</span></code>
method. It can also be set manually.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">apply_ibs_kick</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">xpart.Particles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_slices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">40</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/xibs/kicks.html#KineticKickIBS.apply_ibs_kick"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<p>TODO: NEEDS A REFERENCE FOR THE IMPLEMENTATION AND A CITATION.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>particles</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">xpart.Particles</span></code>) -- the <code class="xref py py-obj docutils literal notranslate"><span class="pre">xpart.Particles</span></code> object to apply <code class="docutils literal notranslate"><span class="pre">IBS</span></code> kicks to.</p></li>
<li><p><strong>n_slices</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- the number of slices to use for the computation of the line density.
Defaults to 40.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.12)"><strong>AttributeError</strong></a> -- if the <code class="docutils literal notranslate"><span class="pre">IBS</span></code> kick coefficients have not yet been computed.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">compute_kick_coefficients</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">xpart.Particles</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">IBSKickCoefficients</span></span></span><a class="reference internal" href="../_modules/xibs/kicks.html#KineticKickIBS.compute_kick_coefficients"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<p>TODO: NEEDS A REFERENCE FOR THE IMPLEMENTATION AND A CITATION.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is separate from the kick application because it internally triggers
the computation of the analytical growth rates, and we don’t necessarily want to
recompute these at every turn. Meanwhile, the kicks <strong>should</strong> be applied at every turn.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>particles</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">xpart.Particles</span></code>) -- the particles to apply the IBS kicks to.</p></li>
<li><p><strong>**kwargs</strong> -- any keyword arguments will be passed to ???.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An <code class="xref py py-obj docutils literal notranslate"><span class="pre">IBSKickCoefficients</span></code> object with the computed coefficients used for the kick application.</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">xibs.kicks.</span></span><span class="sig-name descname"><span class="pre">SimpleKickIBS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BeamParameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OpticsParameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/kicks.html#SimpleKickIBS"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<p>A single class to compute the simple IBS kicks based on the analytical growth rates.
The kicks are implemented according to <span id="id15">[<a class="reference internal" href="../bibliography.html#id6" title="Bruce R, Jowett J. M, Blaskiewicz M, and Fischer W. Time Evolution of the Luminosity of Colliding Heavy-Ion Beams in BNL Relativistic Heavy Ion Collider and CERN Large Hadron Collider. Physical Review Special Topics - Accelerators and Beams, 2010. URL: https://doi.org/10.1103/physrevstab.13.091001, doi:10.1103/physrevstab.13.091001.">RJMMW10</a>]</span>, and
provide a random distribution of momenta changes based on the growth rates, weighted
by the line density of the bunch. The class initiates from a <code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamParameters</span></code> and an
<code class="xref py py-obj docutils literal notranslate"><span class="pre">OpticsParameters</span></code> objects.</p>
<p>See the <a class="reference internal" href="../gallery/demo_simple_kicks.html#demo-simple-kicks"><span class="std std-ref">simple kicks example</span></a> for detailed usage.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Beware: this implementation is only valid <strong>above</strong> transition energy. Because
this formalism implements a weighted random-component kick, it will <em>always</em> lead
to emittance growth. Below transition it is common to observe negative growth rates,
which would lead to emittance <em>shrinkage</em> and therefore the provided kick would have
the wrong effect. It is also possible to obtain negative growth rates above transition
in some scenarios, and internally this implementation sets the growth rate to 0 if it
is found negative. When this happens, a message is logged to inform the user. For any
machine operating below transition energy, the kinetic formalism should be used instead
(see the <code class="xref py py-obj docutils literal notranslate"><span class="pre">KineticKickIBS</span></code> class).</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>When determining kick coefficients (see the <code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_kick_coefficients</span></code> method),
the analytical growth rates are computed. This is done using one of the analytical
classes, which is determined internally based on the optics parameters (namely, the
presence of vertical dispersion), and set as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.analytical_ibs</span></code> attribute.
Choices are logged to the user. It is always possible to override this choice by
manually setting the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.analytical_ibs</span></code> attribute to an instance of the desired
analytical implementation (to be found in <code class="xref py py-obj docutils literal notranslate"><span class="pre">xibs.analytical</span></code>). It is also possible
for the user to provide their own, custom-made analytical implementation, as long as
it inherits from the <code class="xref py py-obj docutils literal notranslate"><span class="pre">AnalyticalIBS</span></code> class and implements the API defined therein.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beam_parameters</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">BeamParameters</span></code>) -- the beam parameters to use for IBS computations.</p></li>
<li><p><strong>optics</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">OpticsParameters</span></code>) -- the optics parameters to use for the IBS computations.</p></li>
<li><p><strong>analytical_ibs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">AnalyticalIBS</span></code>) -- an internal analytical class for growth rates
calculation, which is determined automatically. Can be overridden by the user
by setting this attribute manually.</p></li>
<li><p><strong>kick_coefficients</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">IBSKickCoefficients</span></code>) -- the computed IBS kick coefficients. This
self-updates when they are computed with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_kick_coefficients</span></code> method.
It can also be set manually.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">analytical_ibs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">AnalyticalIBS</span></em></dt>
<dd><p>The analytical IBS implementation used for growth rates calculation.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">apply_ibs_kick</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">xpart.Particles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_slices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">40</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/xibs/kicks.html#SimpleKickIBS.apply_ibs_kick"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<p>Compute the momentum kick to apply based on the provided <code class="xref py py-obj docutils literal notranslate"><span class="pre">xpart.Particles</span></code> object and the
analytical growth rates for the lattice. The kicks are implemented according to Eq (8) of
<span id="id16">[<a class="reference internal" href="../bibliography.html#id6" title="Bruce R, Jowett J. M, Blaskiewicz M, and Fischer W. Time Evolution of the Luminosity of Colliding Heavy-Ion Beams in BNL Relativistic Heavy Ion Collider and CERN Large Hadron Collider. Physical Review Special Topics - Accelerators and Beams, 2010. URL: https://doi.org/10.1103/physrevstab.13.091001, doi:10.1103/physrevstab.13.091001.">RJMMW10</a>]</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>particles</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">xpart.Particles</span></code>) -- the <code class="xref py py-obj docutils literal notranslate"><span class="pre">xpart.Particles</span></code> object to apply <code class="docutils literal notranslate"><span class="pre">IBS</span></code> kicks to.</p></li>
<li><p><strong>n_slices</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- the number of slices to use for the computation of the line density.
Defaults to 40.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.12)"><strong>AttributeError</strong></a> -- if the <code class="docutils literal notranslate"><span class="pre">IBS</span></code> kick coefficients have not yet been computed.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">compute_kick_coefficients</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">xpart.Particles</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">IBSKickCoefficients</span></span></span><a class="reference internal" href="../_modules/xibs/kicks.html#SimpleKickIBS.compute_kick_coefficients"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<p>Computes the <code class="docutils literal notranslate"><span class="pre">IBS</span></code> kick coefficients, named <span class="math notranslate nohighlight">\(K_x, K_y\)</span> and <span class="math notranslate nohighlight">\(K_z\)</span> in this
code base, from analytical growth rates. The coefficients correspond to the right-hand
side of Eq (8) in <span id="id17">[<a class="reference internal" href="../bibliography.html#id6" title="Bruce R, Jowett J. M, Blaskiewicz M, and Fischer W. Time Evolution of the Luminosity of Colliding Heavy-Ion Beams in BNL Relativistic Heavy Ion Collider and CERN Large Hadron Collider. Physical Review Special Topics - Accelerators and Beams, 2010. URL: https://doi.org/10.1103/physrevstab.13.091001, doi:10.1103/physrevstab.13.091001.">RJMMW10</a>]</span> without the line density <span class="math notranslate nohighlight">\(\rho_t(t)\)</span>
and random component <span class="math notranslate nohighlight">\(r\)</span>.</p>
<p>The kick coefficient corresponds to the scaling of the generated random distribution <span class="math notranslate nohighlight">\(r\)</span> and
is expressed as <span class="math notranslate nohighlight">\(K_u = \sigma_{p_u} \sqrt{2 T^{-1}_{IBS_u} T_{rev} \sigma_t \sqrt{\pi}}\)</span>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is separate from the kick application as it internally
triggers the computation of the analytical growth rates. Since this step
is computationally intensive and one might not necessarily want to recompute
the rates before every kick application.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>The calculation is done according to the following steps, which are related to
different terms in Eq (8) of <span id="id18">[<a class="reference internal" href="../bibliography.html#id6" title="Bruce R, Jowett J. M, Blaskiewicz M, and Fischer W. Time Evolution of the Luminosity of Colliding Heavy-Ion Beams in BNL Relativistic Heavy Ion Collider and CERN Large Hadron Collider. Physical Review Special Topics - Accelerators and Beams, 2010. URL: https://doi.org/10.1103/physrevstab.13.091001, doi:10.1103/physrevstab.13.091001.">RJMMW10</a>]</span>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Computes various properties from the non-lost particles in the bunch (<span class="math notranslate nohighlight">\(\sigma_{x,y,\delta,t}\)</span>).</p></li>
<li><p>Computes the standard deviation of momenta for each plane (<span class="math notranslate nohighlight">\(\sigma_{p_u}\)</span>).</p></li>
<li><p>Computes the constant term <span class="math notranslate nohighlight">\(\sqrt{2 T_{rev} \sqrt{\pi}}\)</span>.</p></li>
<li><p>Computes the analytical growth rates <span class="math notranslate nohighlight">\(T_{x,y,z}\)</span> (<span class="math notranslate nohighlight">\(T^{-1}_{IBS_u}\)</span> in Eq (8)).</p></li>
<li><p>Computes, stores and returns the kick coefficients.</p></li>
</ul>
</div></blockquote>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>particles</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">xpart.Particles</span></code>) -- the particles to apply the IBS kicks to.</p></li>
<li><p><strong>**kwargs</strong> -- any keyword arguments will be passed to the growth rates calculation call
(<code class="xref py py-obj docutils literal notranslate"><span class="pre">self.analytical_ibs.growth_rates</span></code>). Note that <code class="xref py py-obj docutils literal notranslate"><span class="pre">epsx</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">epsy</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">sigma_delta</span></code>,
and <code class="xref py py-obj docutils literal notranslate"><span class="pre">bunch_length</span></code> are already provided as positional-only arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An <code class="xref py py-obj docutils literal notranslate"><span class="pre">IBSKickCoefficients</span></code> object with the computed coefficients used for the kick application.</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<section id="formulary">
<span id="xibs-utils"></span><h2>Formulary<a class="headerlink" href="#formulary" title="Link to this heading"></a></h2>
<p>Module with commonly used formulae to compute quantities of interest needed in the rest of the package.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">xibs.formulary.</span></span><span class="sig-name descname"><span class="pre">bunch_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">circumference</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">harmonic_number</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_energy_GeV</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">slip_factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_e</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_rel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">rf_voltage_GV</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_loss_GeV</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_charge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></span><a class="reference internal" href="../_modules/xibs/formulary.html#bunch_length"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Analytical calculation for bunch length for protons / electrons (from Wiedermann’s book).
This is a linear approximation which assumes that particles are in the center of the bucket
only / mostly.</p>
<div class="admonition-todo admonition" id="id19">
<p class="admonition-title">Todo</p>
<p>Figure out exactly the formula that was implemented here and reference / document it in the docstring.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>circumference</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- machine circumference in [m].</p></li>
<li><p><strong>harmonic_number</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- harmonic number of the RF system.</p></li>
<li><p><strong>total_energy_GeV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- total energy of the simulated particles in [GeV].</p></li>
<li><p><strong>slip_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- slip factor of the machine.</p></li>
<li><p><strong>sigma_e</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- relative energy spread of the particles.</p></li>
<li><p><strong>beta_rel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- relativistic beta of the simulated particles.</p></li>
<li><p><strong>rf_voltage_GV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- RF voltage of the machine’s cavities in [GV].</p></li>
<li><p><strong>energy_loss_GeV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- The turn-by-turn oarticle energy loss in [GeV].</p></li>
<li><p><strong>particle_charge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- elementary particle charge, in # of Coulomb charges
(for instance 1 for electron or proton).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The analytically calculated bunch length in [m].</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">xibs.formulary.</span></span><span class="sig-name descname"><span class="pre">energy_spread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">circumference</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">harmonic_number</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_energy_GeV</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">slip_factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunch_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_rel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">rf_voltage_GV</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_loss_GeV</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_charge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></span><a class="reference internal" href="../_modules/xibs/formulary.html#energy_spread"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Counterpart of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">bunch_length</span></code> function, analytically calculates for bunch length for
protons / electrons (from Wiedermann’s book). The same caveats than in <code class="xref py py-obj docutils literal notranslate"><span class="pre">bunch_length</span></code> apply
here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>circumference</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- machine circumference in [m].</p></li>
<li><p><strong>harmonic_number</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- harmonic number of the RF system.</p></li>
<li><p><strong>total_energy_GeV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- total energy of the simulated particles in [GeV].</p></li>
<li><p><strong>slip_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- slip factor of the machine.</p></li>
<li><p><strong>bunch_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- bunch length in [m].</p></li>
<li><p><strong>beta_rel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- relativistic beta of the simulated particles.</p></li>
<li><p><strong>rf_voltage_GV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- RF voltage of the machine’s cavities in [GV].</p></li>
<li><p><strong>energy_loss_GeV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- The turn-by-turn oarticle energy loss in [GeV].</p></li>
<li><p><strong>particle_charge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- elementary particle charge, in # of Coulomb charges
(for instance 1 for electron or proton).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The analytically calculated dimensionless energy spread for the particle bunch.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">xibs.formulary.</span></span><span class="sig-name descname"><span class="pre">ion_bunch_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">circumference</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">harmonic_number</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_energy_GeV</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">slip_factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_e</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_rel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">rf_voltage_GV</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_charge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xibs/formulary.html#ion_bunch_length"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Analytical calculation for bunch length for ions (from Wiedermann’s book). This calculation
does not work too well if the bucket is full. Implementation so far as I can tell is as used
in the scripts for LEIR for ions (some MAD-X script that LEIR studies were using for IBS).</p>
<div class="admonition-todo admonition" id="id20">
<p class="admonition-title">Todo</p>
<p>Figure out exactly the formula that was implemented here and reference / document it in the docstring.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>circumference</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- machine circumference in [m].</p></li>
<li><p><strong>harmonic_number</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- harmonic number of the RF system.</p></li>
<li><p><strong>total_energy_GeV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- total energy of the simulated particles in [GeV].</p></li>
<li><p><strong>slip_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- slip factor of the machine.</p></li>
<li><p><strong>sigma_e</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- relative energy spread of the particles.</p></li>
<li><p><strong>beta_rel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- relativistic beta of the simulated particles.</p></li>
<li><p><strong>rf_voltage_GV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- RF voltage of the machine’s cavities in [GV].</p></li>
<li><p><strong>particle_charge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- elementary particle charge, in # of Coulomb charges (for
instance 1 for electron or proton).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The analytically calculated bunch length in [m].</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">xibs.formulary.</span></span><span class="sig-name descname"><span class="pre">ion_energy_spread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">circumference</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">harmonic_number</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_energy_GeV</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">slip_factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunch_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_rel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">rf_voltage_GV</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_charge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></span><a class="reference internal" href="../_modules/xibs/formulary.html#ion_energy_spread"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Counterpart of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">ion_bunch_length</span></code> function, analytically calculates for bunch length for
protons / electrons. The same caveats than in <code class="xref py py-obj docutils literal notranslate"><span class="pre">ion_bunch_length</span></code> apply here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>circumference</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- machine circumference in [m].</p></li>
<li><p><strong>harmonic_number</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- harmonic number of the RF system.</p></li>
<li><p><strong>total_energy_GeV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- total energy of the simulated particles in [GeV].</p></li>
<li><p><strong>slip_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- slip factor of the machine.</p></li>
<li><p><strong>bunch_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- ion bunch length in [m].</p></li>
<li><p><strong>beta_rel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- relativistic beta of the simulated particles.</p></li>
<li><p><strong>rf_voltage_GV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- RF voltage of the machine’s cavities in [GV].</p></li>
<li><p><strong>particle_charge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- elementary particle charge, in # of Coulomb charges (for
instance 1 for electron or proton).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The analytically calculated dimensionless energy spread for an ion bunch.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">xibs.formulary.</span></span><span class="sig-name descname"><span class="pre">phi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ArrayLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ArrayLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ArrayLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ArrayLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">ArrayLike</span></span></span><a class="reference internal" href="../_modules/xibs/formulary.html#phi"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Phi parameter of Eq (15) in <span id="id21">[<a class="reference internal" href="../bibliography.html#id3" title="Sergei Nagaitsev. Intrabeam Scattering Formulas for Fast Numerical Evaluation. Phys. Rev. ST Accel. Beams, 8:064403, 5 2005. URL: https://link.aps.org/doi/10.1103/PhysRevSTAB.8.064403, doi:10.1103/PhysRevSTAB.8.064403.">Nag05</a>]</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- beta-functions through the machine.</p></li>
<li><p><strong>alpha</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- alpha-functions through the machine.</p></li>
<li><p><strong>dx</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- dispersion function through the machine.</p></li>
<li><p><strong>dpx</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- dpx function through the machine.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An array of phi values through the machine.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">xibs.version.</span></span><span class="sig-name descname"><span class="pre">version_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/xibs/version.html#version_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 0.2.0.</span></p>
</div>
<p>Debug convenience function to give version, platform and runtime information.</p>
</dd></dl>
</section>
</div>
</div>
<footer><div aria-label="Footer" class="rst-footer-buttons" role="navigation">
<a accesskey="p" class="btn btn-neutral float-left" href="../gallery/demo_simple_kicks.html" rel="prev" title="Simple Kicks Formalism - IBS Kicks Based on Analytical Growth Rates"><span aria-hidden="true" class="fa fa-arrow-circle-left"></span> Previous</a>
<a accesskey="n" class="btn btn-neutral float-right" href="../faq.html" rel="next" title="Frequently Asked Questions">Next <span aria-hidden="true" class="fa fa-arrow-circle-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<p>© Copyright 2023, Felix Soubelet.</p>
</div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
</div>
</div>
</section>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
</body>
</html>